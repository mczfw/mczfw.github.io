<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>我的世界服务器列表 - Minecraft Server list</title>
  <meta name="description" content="我的世界服务器列表，查找自己喜欢的服务器，这里有我的世界服务器IP地址大全。">
  <meta name="keywords" content="我的世界服务器, 我的世界服务器列表">

  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: PingFang SC, HarmonyOS_Regular, Helvetica Neue, Microsoft YaHei, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fafafa;
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      width: 90%;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    h1 a {
      color: inherit;
      text-decoration: none;
    }

    h1 a:hover {
      color: #5cb85c;
    }

    .x {
      text-align: center;
      margin-bottom: 20px;
      color: #666;
      font-size: 0.95rem;
    }

    .x a {
      color: #5cb85c;
      font-weight: bold;
    }

    #myForm {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    #myForm input {
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      min-width: 250px;
      max-width: 100%;
    }

    #myForm button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 4px;
      background: #5cb85c;
      color: white;
      cursor: pointer;
      white-space: nowrap;
    }

    #myForm button:hover {
      background: #4cae4c;
    }

    #data {
      margin-top: 30px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    /* ========== 桌面端：表格 ==========
       仅在屏幕宽度 > 768px 时显示 */
    @media (min-width: 769px) {
      .table-container {
        display: block;
      }

      .table-container table {
        width: 100%;
        border-collapse: collapse;
        font-size: 1rem;
      }

      .table-container th,
      .table-container td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #eee;
      }

      .table-container th {
        background: #f8f9fa;
        font-weight: bold;
        color: #333;
      }

      .table-container tr:hover {
        background: #f8f9fa;
      }

      .table-container td:first-child img {
        width: 40px;
        height: 40px;
        border-radius: 4px;
        object-fit: cover;
      }

      .table-container td:first-child img[src=""],
      .table-container td:first-child img:not([src]) {
        display: none;
      }

      /* IP点击复制 - 仅桌面表格 */
      .server-address {
        color: #495057;
        cursor: pointer;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: monospace;
        font-size: 0.9rem;
        background: rgba(92, 184, 92, 0.1);
        border: 1px solid transparent;
        display: inline-block;
      }

      .server-address:hover {
        background: rgba(92, 184, 92, 0.2);
        border-color: #5cb85c;
      }
    }

    /* ========== 手机端：卡片 ==========
       仅在屏幕宽度 ≤ 768px 时显示 */
    @media (max-width: 768px) {
      .table-container {
        display: none;
      }

      .card-container {
        display: block;
      }

      .server-card {
        background: #fff;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        margin-bottom: 16px;
        padding: 16px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .server-card-header {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
      }

      .server-card-icon {
        width: 40px;
        height: 40px;
        border-radius: 4px;
        object-fit: cover;
        margin-right: 10px;
      }

      .server-card-icon[src=""],
      .server-card-icon:not([src]) {
        display: none;
      }

      .server-card-icon-placeholder {
        width: 40px;
        height: 40px;
        background: #f0f0f0;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        font-size: 18px;
        margin-right: 10px;
      }

      .server-card-title {
        font-size: 1rem;
        font-weight: 600;
        color: #333;
      }

      .server-card-content {
        font-size: 0.9rem;
      }

      .server-card-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 6px;
        align-items: center;
      }

      .server-card-row:last-child {
        margin-bottom: 0;
      }

      .server-card-label {
        font-weight: 500;
        color: #666;
        min-width: 80px;
      }

      .server-card-value {
        color: #333;
        text-align: right;
        flex: 1;
      }

      .server-card-address {
        color: #495057;
        cursor: pointer;
        padding: 3px 6px;
        border-radius: 3px;
        font-family: monospace;
        font-size: 0.8rem;
        background: rgba(92, 184, 92, 0.1);
        border: 1px solid transparent;
        display: inline-block;
      }

      .server-card-address:hover {
        background: rgba(92, 184, 92, 0.2);
        border-color: #5cb85c;
      }

      .loading-text,
      .error-text {
        padding: 30px 20px;
        text-align: center;
        font-size: 1rem;
        color: #666;
      }

      .error-text {
        color: #dc3545;
      }
    }

    @media (max-width: 768px) {
      .table-container {
        display: none !important;
      }

      .card-container {
        display: block !important;
      }
    }

    @media (min-width: 769px) {
      .table-container {
        display: block !important;
      }

      .card-container {
        display: none !important;
      }
    }

    /* 复制提示 */
    #copyTooltip {
      position: fixed;
      background: #28a745;
      color: white;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 10000;
      pointer-events: none;
      opacity: 0;
      transform: translate(-50%, -50%);
      transition: opacity 0.3s;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    #copyTooltip.show {
      opacity: 1;
    }

    #copyTooltip.error {
      background: #dc3545;
    }

    /* 返回顶部（可选） */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: #5cb85c;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(92, 184, 92, 0.3);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      z-index: 1000;
    }

    .back-to-top.show {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background: #4cae4c;
    }

    /* 页脚 */
    .footer-download {
      margin-top: 40px;
      padding: 20px;
      text-align: center;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .footer-download a {
      color: #5cb85c;
      text-decoration: none;
      padding: 10px 20px;
      border: 1px solid #5cb85c;
      border-radius: 4px;
      display: inline-block;
      transition: all 0.3s;
    }

    .footer-download a:hover {
      background: #5cb85c;
      color: #fff;
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1><a href="/">我的世界服务器列表</a></h1>
    </header>

    <main>
      <section>
        <p class="x">
          我的世界服务器列表，查找自己喜欢的服务器，这里有我的世界服务器IP地址大全，
          <a href="https://list.mczfw.cn">我的世界服务器列表驱动引擎</a>。
        </p>

        <form id="myForm">
          <input type="text" name="ip" placeholder="请输入服务器IP地址" required>
          <button type="submit">查询</button>
        </form>

        <div id="data">
          <!-- 桌面端表格 -->
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>图标</th>
                  <th>服务器地址</th>
                  <th>MOTD</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <tr><td colspan="3">🔄 正在加载...</td></tr>
              </tbody>
            </table>
          </div>

          <!-- 手机端卡片 -->
          <div class="card-container" id="cardContainer">
            <!-- 卡片会通过 JS 填充 -->
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- 复制提示 -->
  <div id="copyTooltip" class="copy-tooltip">✅ 已复制</div>

  <!-- 返回顶部 -->
  <button id="backToTop" class="back-to-top" title="返回顶部">↑</button>

  <!-- 页脚 -->
  <div class="footer-download">
    <a href="https://list.mczfw.cn/download?download=静态我的世界服务器查询网站源码">点击下载我的世界查询网站源码</a>
  </div>

  <script>
    const tableBody = document.getElementById('tableBody');
    const cardContainer = document.getElementById('cardContainer');
    const copyTooltip = document.getElementById('copyTooltip');
    const backToTopButton = document.getElementById('backToTop');

    function showLoading() {
      if (window.innerWidth <= 768) {
        cardContainer.innerHTML = '<div class="loading-text">🔄 正在加载服务器列表...</div>';
      } else {
        tableBody.innerHTML = '<tr><td colspan="3">🔄 正在加载服务器列表...</td></tr>';
      }
    }

    function showError(message = '❌ 加载失败，请稍后重试') {
      if (window.innerWidth <= 768) {
        cardContainer.innerHTML = `<div class="error-text">${message}</div>`;
      } else {
        tableBody.innerHTML = `<tr><td colspan="3">${message}</td></tr>`;
      }
    }

    function showDesktopTable(headers, rows) {
      let html = '';
      rows.forEach(row => {
        const icon = row[0] && row[0].trim() ? `<img src="${row[0]}" alt="icon">` : '';
        const address = row[1] || 'N/A';
        const motd = row[2] || 'N/A';

        html += `
          <tr>
            <td>${icon}</td>
            <td>
              ${address.replace(/((?:\b(?:\d{1,3}\.){3}\d{1,3}\b|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(?::\d+)?)/g, 
                '<span class="server-address" onclick="copyToClipboard(\'$1\', this)" title="点击复制">$1</span>')}
            </td>
            <td>${motd}</td>
          </tr>
        `;
      });
      tableBody.innerHTML = html;
    }

    function showMobileCards(rows) {
      let html = '';
      rows.forEach((row, i) => {
        const icon = row[0] && row[0].trim() ? `<img src="${row[0]}" alt="icon" class="server-card-icon">` 
                                                : '<div class="server-card-icon-placeholder">🎮</div>';
        const address = row[1] || `服务器 ${i + 1}`;
        const motd = row[2] || '暂无描述';

        html += `
          <div class="server-card">
            <div class="server-card-header">
              ${icon}
              <div class="server-card-title">${address}</div>
            </div>
            <div class="server-card-content">
              <div class="server-card-row">
                <span class="server-card-label">服务器地址:</span>
                <span class="server-card-value">
                  ${address.replace(/((?:\b(?:\d{1,3}\.){3}\d{1,3}\b|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(?::\d+)?)/g, 
                    '<span class="server-card-address" onclick="copyToClipboard(\'$1\', this)" title="点击复制">$1</span>')}
                </span>
              </div>
              <div class="server-card-row">
                <span class="server-card-label">服务器MOTD:</span>
                <span class="server-card-value">${motd}</span>
              </div>
            </div>
          </div>
        `;
      });
      cardContainer.innerHTML = html;
    }

    function copyToClipboard(text, element) {
      element.classList.add('clicked');
      setTimeout(() => element.classList.remove('clicked'), 150);

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => showCopySuccess());
      } else {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.cssText = 'position:fixed;left:-9999px;top:-9999px;opacity:0;';
        document.body.appendChild(textarea);
        textarea.select();
        try {
          document.execCommand('copy') && showCopySuccess();
        } catch (e) {
          showCopyError();
        }
        document.body.removeChild(textarea);
      }
    }

    function showCopySuccess() {
      copyTooltip.textContent = '✅ 已复制';
      copyTooltip.className = 'copy-tooltip show';
      setTimeout(() => copyTooltip.className = 'copy-tooltip', 2000);
    }

    function showCopyError() {
      copyTooltip.textContent = '❌ 复制失败';
      copyTooltip.className = 'copy-tooltip error show';
      setTimeout(() => copyTooltip.className = 'copy-tooltip', 2000);
    }

    // ===== 数据加载函数 =====
    async function fetchData() {
      showLoading();

      try {
        // 默认加载列表
        const res = await fetch('https://list.mczfw.cn/api');
        if (!res.ok) throw new Error('网络错误');
        const data = await res.json();
        if (!Array.isArray(data)) throw new Error('数据格式错');

        const rows = data.map(item => [item.logo || '', item.ip || 'N/A', item.motd || 'N/A']);

        if (window.innerWidth <= 768) {
          showMobileCards(rows);
        } else {
          showDesktopTable(['图标', '服务器地址', 'MOTD'], rows);
        }
      } catch (err) {
        console.error(err);
        showError('❌ 获取服务器列表失败');
      }
    }

    // ===== 事件绑定 =====
    document.addEventListener('DOMContentLoaded', () => {
      fetchData();

      // 表单查询（暂时简单处理）
      document.getElementById('myForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const ip = document.querySelector('input[name="ip"]').value.trim();
        if (!ip) {
          showError('⚠️ 请输入IP');
          return;
        }

        showLoading();

        try {
          const res = await fetch(`https://list.mczfw.cn/api/${encodeURIComponent(ip)}`);
          if (!res.ok) throw new Error('查询失败');
          const data = await res.json();
          if (!data) throw new Error('无数据');

          const rows = [[
            '', // 无图标
            `${data.p || 'N/A'} / ${data.mp || 'N/A'}`,
            '状态：在线'
          ]];

          if (window.innerWidth <= 768) {
            showMobileCards(rows);
          } else {
            showDesktopTable(['在线人数', '服务器状态'], rows);
          }
        } catch (err) {
          console.error(err);
          showError('❌ 查询失败');
        }
      });

      // 返回顶部
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add('show');
        } else {
          backToTopButton.classList.remove('show');
        }
      });

      backToTopButton.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // 百度统计
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56cd7ad35698ff4d95797ec00c9cb5b5";
      var s = document.getElementsByTagName("script")[0];
      if (s) s.parentNode.insertBefore(hm, s);
    })();
  </script>
</body>

</html>
